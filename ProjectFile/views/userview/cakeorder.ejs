<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paris Sweet Patisserie - Cake Order Form</title>
    <link rel="stylesheet" href="../css/cakeorderstyle.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById("cakeOrderForm").addEventListener("submit", function(event) {
                event.preventDefault(); // Prevent default form submission
                
                // Get form data
                const formData = new FormData(this);
                const formObject = {};
                formData.forEach((value, key) => { formObject[key] = value; });
    
                // Send form data to the backend via Fetch API
                fetch('/cakeorder', {
                    method: 'POST',
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(formObject)
                })
                .then(response => response.json())
                .then(data => {
                    document.getElementById("cakeOrderForm").reset(); // Clear the form
                    document.getElementById("thankYouModal").style.display = "flex";
                    launchConfetti(); // ðŸŽ‰ Fire the confetti when thank-you modal shows

                })
                .catch(error => console.error('Error:', error));
            });
        });
        function closeModal() {
        document.getElementById("thankYouModal").style.display = "none";
        window.location.href = '/cakeorder'; // Refresh the page only after clicking OK
        }
    </script>
    
</head>
<body>
    
    <!-- Navigation bar -->
    <!-- Include the Navbar -->
    <%- include('../partials/navbar') %>

    <div class="container">
        <h2>Paris Sweet Patisserie - Cake Request Form</h2>
        <!-- thank you message after submit -->

        <form id="cakeOrderForm">

            <!-- client info -->
            <label for="name">Your Full Name:</label>
            <input type="text" id="name" name="name" placeholder="Required "required>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" placeholder="Required" required>

            <label for="phone">Phone Number:</label>
            <input type="tel" id="phone" name="phone" placeholder="Required" required>

            <label for="needByDate">Cake Needed By (Date):</label>
            <input type="date" id="needByDate" name="needByDate" required>
        
            <!-- cake details -->  
            <label for="cakeType">Cake Type:</label>
            <select id="cakeType" name="cakeType">
                <option value="chocolate">Chocolate</option>
                <option value="vanilla">Vanilla</option>
                <option value="red velvet">Red Velvet</option>
                <option value="carrot cake">Carrot Cake</option>
                <option value="custom">Custom</option>
            </select>

            <label for="frosting">Frosting Type:</label>
            <select id="frosting" name="frosting">
                <option value="buttercream">Buttercream</option>
                <option value="whipped cream">Whipped Cream</option>
                <option value="fondant">Fondant</option>
                <option value="ganache">Ganache</option>
                <option value="custom">Custom</option>
            </select>

            <label for="size">Cake Size:</label>
            <select id="size" name="size">
                <option value="6-inch">6-inch</option>
                <option value="8-inch">8-inch</option>
                <option value="10-inch">10-inch</option>
                <option value="custom">Custom</option>
            </select>

            <label for="shape">Cake Shape:</label>
            <select id="shape" name="shape">
                <option value="round">Round</option>
                <option value="square">Square</option>
                <option value="heart">Heart</option>
                <option value="custom">Custom</option>
            </select>

            <label for="cakeImage">Upload Image (optional):</label>
            <input type="file" id="cakeImage" name="cakeImage" accept="image/*">

            <label for="description">Additional Details:</label>
            <textarea id="description" name="description" rows="4" placeholder="Describe any special requests..."></textarea>

            <button type="submit">Submit Order</button>
        </form>

        <!-- disclaimer -->
        <p class="disclaimer">Filling out this form does not guarantee an order. We will contact you via phone or email to confirm if we can fulfill your cake request.</p>
    </div>
    <!-- custom message-->
    <div id="thankYouModal" style="display: none;" class="modal-overlay">
        <div class="modal-content">
            <h3>From Paris Sweet Patisserie:</h3>
            <p>Thank you for your submission! We will contact you soon.</p>
            <button onclick="closeModal()">OK</button>
        </div>
    </div>
    <!-- confetti after submission-->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="/js/confetti.js"></script>

    <!-- Footer Section -->
    <%- include('../partials/footer') %>
</body>
</html>
